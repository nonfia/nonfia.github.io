[{"content":"Thymeleaf 介绍 Thymeleaf 是新一代 Java 模板引擎，它类似于 Velocity、FreeMarker 等传统 Java 模板引擎，但是与传统 Java 模板引擎不同的是，Thymeleaf 支持 HTML 原型。\n它既可以让前端工程师在浏览器中直接打开查看样式，也可以让后端工程师结合真实数据查看显示效果，同时，SpringBoot 提供了 Thymeleaf 自动化配置解决方案，因此在 SpringBoot 中使用 Thymeleaf 非常方便。\n事实上， Thymeleaf 除了展示基本的 HTML ，进行页面渲染之外，也可以作为一个 HTML 片段进行渲染，例如我们在做邮件发送时，可以使用 Thymeleaf 作为邮件发送模板。\nThymeleaf 官网\n引入依赖 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-thymeleaf\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; 自动渲染 定义 Controller， 返回逻辑视图 index，Spring Boot 会到 resources/templates 目录下寻找一个名为 index.html 的 Thymeleaf 模板文件\n@GetMapping(\u0026#34;/\u0026#34;) public String index(Model model) { model.addAttribute(\u0026#34;name\u0026#34;, \u0026#34;nonfia\u0026#34;); model.addAttribute(\u0026#34;account\u0026#34;, \u0026#34;root\u0026#34;); return \u0026#34;index\u0026#34;; } 在 resources/templates 创建 Thymeleaf 模板文件 index.html\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34; xmlns:th=\u0026#34;http://www.thymeleaf.org\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;index\u0026lt;/title\u0026gt; \u0026lt;!-- js 获取数据 --\u0026gt; \u0026lt;script th:inline=\u0026#34;javascript\u0026#34;\u0026gt; let account = [[${account}]]; console.log(account) \u0026lt;/script\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Hello!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;Welcome to \u0026lt;span th:text=\u0026#34;${name}\u0026#34;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 手动渲染 新建一个邮件模板 mail.html\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34; xmlns:th=\u0026#34;http://www.thymeleaf.org\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Title\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;hello 你好 \u0026lt;span th:text=\u0026#34;${name}\u0026#34;\u0026gt;\u0026lt;/span\u0026gt;您的工资信息如下：\u0026lt;/p\u0026gt; \u0026lt;table\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;职位\u0026lt;/td\u0026gt; \u0026lt;td th:text=\u0026#34;${position}\u0026#34;\u0026gt;\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt;薪水\u0026lt;/td\u0026gt; \u0026lt;td th:text=\u0026#34;${salary}\u0026#34;\u0026gt;\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 后端代码处理\n@Autowired TemplateEngine templateEngine; public void mail() throws MessagingException { Context context = new Context(); context.setVariable(\u0026#34;name\u0026#34;, \u0026#34;Tom\u0026#34;); context.setVariable(\u0026#34;position\u0026#34;, \u0026#34;工程师\u0026#34;); context.setVariable(\u0026#34;salary\u0026#34;, 88888); // 调用 process 方法进行渲染，该方法的返回值就是渲染后的 HTML 字符串 String mail = templateEngine.process(\u0026#34;mail\u0026#34;, context); } ","date":"2024-11-20T00:00:00Z","image":"https://picsum.photos/seed/05aa2367a9817122066433ef3b31eddc/800/600.webp","permalink":"/document/springboot/05aa2367a9817122066433ef3b31eddc/","title":"Thymeleaf 模板引擎"},{"content":"Spring Boot Starter 介绍 Spring Boot Starter 是一组预定义的依赖项集合，旨在简化项目配置和依赖管理。每个 Starter 都包含了实现特定功能所需的库和组件，以及相应的配置文件。开发者只需在项目中引入相应的 Starter 依赖，即可快速搭建起具备该功能的项目骨架。\n此外，Spring Boot Starter 还遵循 约定优于配置 的原则，通过自动配置来减少手动配置的工作量。这意味着，只要项目中存在特定的类、资源或依赖项，Spring Boot就会自动应用相关的配置。\n总的来说，Spring Boot Starter 提供了一种快速、简便的方式来构建和配置 Spring Boot 应用程序。它使得开发者能够更专注于业务逻辑的实现，而无需花费大量时间在繁琐的配置和依赖管理上。\n主要特点 简化依赖管理：通过引入 Starter，开发者无需手动添加和管理大量的依赖项。 约定优于配置：通过默认的配置满足大多数场景的需求，减少了手动配置的工作量。 自动配置：Spring Boot 会根据 classpath 下的类、资源文件和 META-INF/spring.factories 配置文件自动配置项目所需的各种组件和服务。 易于扩展：开发者可以通过自定义 Starter 来扩展 Spring Boot 的功能，满足特定项目的需求。 自定义 Spring Boot Starter 引入依赖 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-autoconfigure\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;${spring-boot.version}\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- 注解处理器 --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-configuration-processor\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;${spring-boot.version}\u0026lt;/version\u0026gt; \u0026lt;optional\u0026gt;true\u0026lt;/optional\u0026gt; \u0026lt;/dependency\u0026gt; 注解处理器 spring-boot-configuration-processor，可以在编译时生成元数据文件 META-INF/spring-configuration-metadata.json，元数据文件能够为在配置 application.yml 或者 application.properties 提供自动补全和文档支持\n定义服务接口 定义配置 EventProperties，用来接受 application.properties 中配置的值\n@ConfigurationProperties(prefix = \u0026#34;brainy.nonfia\u0026#34;) public class EventProperties { /** * 名称 */ private String name = \u0026#34;nonfia\u0026#34;; /** * 消息 */ private String msg = \u0026#34;hello, welcome use nonfia\u0026#34;; } 定义 EventService 接口和默认实现 DefaultEventService\npublic interface EventService { String say(); } public class DefaultEventService implements EventService { private final EventProperties eventProperties; DefaultEventService(EventProperties eventProperties) { this.eventProperties = eventProperties; } @Override public String say() { return eventProperties.getName() + \u0026#34;, \u0026#34; + eventProperties.getMsg(); } } 自动配置和打包 定义自动配置 EventManagementAutoConfiguration\n@AutoConfiguration @EnableConfigurationProperties(EventProperties.class) public class EventManagementAutoConfiguration { @Bean @ConditionalOnMissingBean public EventService eventService(EventProperties eventProperties) { return new DefaultEventService(eventProperties); } } 在 src/main/resources/META-INF 目录下创建 spring.factories 文件（Spring Boot 2.7 起不推荐使用 spring.factories 文件配置，3.x 版本弃用）并添加以下配置：\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\ com.brainy.nonfia.autoconfigure.EventManagementAutoConfiguration Spring Boot 3.x 版本后在 src/main/resources/META-INF/spring 目录下创建 org.springframework.boot.autoconfigure.AutoConfiguration.imports 文件，并添加以下配置：\ncom.brainy.nonfia.autoconfigure.EventManagementAutoConfiguration mvn clean install 打包并安装到本地Maven仓库， 在新项目引入依赖\n","date":"2024-11-19T00:00:00Z","image":"https://picsum.photos/seed/84b1fbe0502427f210938f23bc01b4ag/800/600.webp","permalink":"/document/springboot/84b1fbe0502427f210938f23bc01b4ag/","title":"Spring Boot Starter"},{"content":"配置文件解析 Spring Boot 启动项目会默认加载名为 application 的配置文件，配置文件 配置文件有两种不同的格式，即 application.properties 和 application.yml， yaml 格式的数据是有序的，properties 格式的数据是无序的\n配置文件的位置 application.properties 和 application.yml 文件可以放在以下四个位置：\n外置，当前项目根目录下的 config 目录下 外置，当前项目的根目录下 内置，resources 目录下的 config 目录下 内置，resources 目录下 如上顺序，四个配置文件的优先级依次降低\n此外，如果你在相同优先级位置同时有 application.properties 和 application.yml，那么 application.properties 会覆盖 application.yml。\n自定义配置文件 自定义配置文件名 项目启动时指定配置文件的名字，在项目启动时加载名为 app 的配置文件而不是 application。\nspring.config.name=app 自定义配置文件位置 重新定义配置文件的位置，此参数会覆盖掉默认的四个位置\nspring.config.location=classpath:/custom-location/ 在默认的四个位置的基础上，再添加几个位置，新添加位置的优先级大于原本的位置\nspring.config.additional-location=classpath:/custom-location/ 自定义属性 application.properties 中添加\nbook.name=西游记 book.author=吴承恩 book.price=18 各个参数之间也可以直接引用\nbook.name=西游记 book.author=吴承恩 book.price=18 book.desc=${book.name}是${book.author}写的 普通的属性注入 直接通过 @Value 注解注入配置文件的属性\n@Value(\u0026#34;${book.name}\u0026#34;) private String name; @Value(\u0026#34;${book.author}\u0026#34;) private String author; @Value(\u0026#34;${book.price}\u0026#34;) private int price; @Value(\u0026#34;${book.price}\u0026#34;) private String desc; 如果不希望把所有配置都放在 application.properties 里面，也可以新定义一个配置文件，例如在 resources 目录下，自定义 book.properties 文件\nbook.name=西游记 book.author=吴承恩 book.price=18 book.desc=${book.name}是${book.author}写的 此时需要通过 @PropertySource 注解来引入配置\n@Component @PropertySource(\u0026#34;classpath:book.properties\u0026#34;) @ConfigurationProperties(prefix = \u0026#34;book\u0026#34;) public class Book { private String name; private String author; private int price; private String desc; } 类型安全的属性注入 引入 @ConfigurationProperties 注解，同时配置了属性的前缀 prefix = \u0026ldquo;book\u0026rdquo;，此时会自动将配置文件的属性注入到对象对应的属性中\n@Component @ConfigurationProperties(prefix = \u0026#34;book\u0026#34;) public class Book { private String name; private String author; private int price; private String desc; } 多环境配置 在 Spring Boot 中多环境配置文件名需要满足 application-{profile}.properties 的格式，其中 {profile} 对应你的环境标识，比如：\napplication-dev.properties：开发环境 application-prod.properties：生产环境 使用对应的环境，只需要在 application.properties 中使用 spring.profiles.active 属性来设置\nspring.profiles.active=dev 除却 spring.profiles.active 来激活一个或者多个 Profile 之外，还可以用 spring.profiles.include 来叠加 Profile。\nspring.profiles.include=db, redis 为了进一步简化为不同环境定义属性的过程，甚至可以将所有属性放在同一个文件中，并使用分隔符来表示 Profile。\nspring.profiles.active=dev #--- spring.config.activate.on-profile=dev book.name=西游记 book.author=吴承恩 book.price=18 book.desc=${book.name}是${book.author}写的 #--- spring.config.activate.on-profile=prod book.name=三国演义 book.author=罗贯中 book.price=18 book.desc=${book.name}是${book.author}写的 ","date":"2024-11-18T00:00:00Z","image":"https://picsum.photos/seed/00f493c93a3f4cc188ddebd4d3ea26f2/800/600.webp","permalink":"/document/springboot/00f493c93a3f4cc188ddebd4d3ea26f2/","title":"配置文件解析"},{"content":"Spring Boot 介绍 Spring Boot是由 Pivotal 团队提供的一套开源框架，可以简化 spring 应用的创建及部署。它提供了丰富的 Spring 模块化支持，可以帮助开发者更轻松快捷地构建出企业级应用。Spring Boot 通过自动配置功能，降低了复杂性，同时支持基于 JVM 的多种开源框架，可以缩短开发时间，使开发更加简单和高效。\nSpring Boot 官网\nSpring Boot 中文文档\n创建方式 在线创建 打开Spring Initializr 官网\n这里要配置的按顺序分别如下：\nProject : 它定义项目的种类。我们可以创建 Maven 项目或 Gradle 项目。 Language : Spring Initializr 提供了三种语言 Java，Kotlin，和 Groovy 的选择。 Spring Boot : 可以选择 Spring Boot 版本。 Project Metadata : 它包含与项目相关的信息，例如 Group，Artifact 等。 Dependencies : 添加到项目中的依赖。 所有的事情全部完成后，点击最下面的 Generate，此时会自动下载项目，将下载下来的项目解压，然后用 IntelliJ IDEA 或者 Eclipse 打开即可进行开发。\n开发工具创建（IntelliJ IDEA） 首先在创建项目时选择 Spring boot\n接下来选择需要添加的依赖\n勾选完成后，点击 创建 完成项目的创建。\n项目结构 根据上面的操作已经初始化了一个 Spring Boot 的框架了，项目结构如下：\n此时项目里面基本没有代码，除了空目录外，还包含如下几样东西。\npom.xml：Maven 构建说明文件。 DemoApplication.java：一个带有 main() 方法的类，用于启动应用程序。 DemoApplicationTests.java：一个空的 Junit 测试类，它加载了一个使用 Spring Boot 字典配置功能的 Spring 应用程序上下文。 application.properties：一个空的 properties 文件，你可以根据需要添加配置属性。 运行项目 修改 DemoApplication.java\n@RestController @SpringBootApplication public class DemoApplication { public static void main(String[] args) { SpringApplication.run(DemoApplication.class, args); } @GetMapping(\u0026#34;/\u0026#34;) public String hello() { return \u0026#34;Hello World\u0026#34;; } } 运行项目，控制台打印如下\n此时浏览器输入 http://localhost:8080 浏览器会打印 Hello World\n","date":"2024-11-17T00:00:00Z","image":"https://picsum.photos/seed/ab2098abbc2e93731d313aaddebe260j/800/600.webp","permalink":"/document/springboot/ab2098abbc2e93731d313aaddebe260j/","title":"Spring Boot 创建"},{"content":"Hugo 介绍 Hugo 是一个用 Go 编写的静态站点生成器，可以快速方便的创建自己的博客。\nHugo 支持 Markdown 语法，我们可以将自己的文章写成 Markdown 的格式，放在我们用Hugo 创建的博客系统中，从而展示给他人。\nHugo 官网\nHugo安装 Windows 推荐直接使用 winget 的方式安装 Hugo，其他操作系统的安装方法可以查阅官方文档\nwinget install Hugo.Hugo.Extended 验证安装是否成功\nhugo version 网站配置 创建站点 hugo new site blog.source 在 GitHub 上创建两个仓库，blog.source 和 xxx.github.io，其中 blog.source 是你的博客源仓库，xxx.github.io 是你的 GitHub Pages 仓库， xxx 是你的 GitHub 用户名\n将本地文件夹 blog.source 初始化为 git 仓库，并将远程仓库地址设置为 GitHub 上 blog.source 的仓库地址\ngit init -b main git remote add origin remoteAddr git add . git commit -m \u0026#34;init\u0026#34; git push -u origin main 安装主题 Hugo社区 上找到一款你喜欢的主题，此处以 theme-stack-starter 为例\n添加为子模块 我们的网站已经使用le Git，可以通过以下命令来将主题作为子模块使用\ngit submodule add https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack Hugo module 为了让我们项目不参杂其他文件，此处以 Hugo module 方法安装主题，使用此方法，项目目录下不会有其他文件。当修改主题，你必须将要修改的文件复制到 项目根目录下的同一目录中。\n首先将你的网站变成一个 Hugo 模块\nhugo mod init github.com/name/blog.source 然后将主题作为依赖项导入，在站点配置文件添加以下内容\nmodule: imports: - path: github.com/CaiJimmy/hugo-theme-stack/v3 运行以下命令将主题更新到最新版本\nhugo mod get -u github.com/CaiJimmy/hugo-theme-stack/v3 hugo mod tidy 配置修改 将 exampelSite 文件夹中的 Content 和 hugo.yaml 复制到项目根目录中，并删掉hugo.toml\n子模块添加的主题， exampelSite 文件夹在 /themes/hugo-theme-stack 下 Hugo module，进入 GitHub 获取 exampelSite 文件夹 根据配置文件的注释和主题的官方文档修改配置，需要注意以下配置\n# 网站地址\u0026lt;user\u0026gt;.github.io baseurl: https://example.com # 网站名 title: Example Site # Hugo module 安装 不需要此配置 theme: hugo-theme-stack # 中文博客注意修改成 zh-cn DefaultContentLanguage: en # DefaultContentLanguage 是 zh-cn 时，修改为true hasCJKLanguage: false # 头像位置 assets/img/avatar.png sidebar: avatar: src: img/avatar.png # 使用数学公式需要打开 article: math: true # 图标位置 static/icon/favicon.ico params: favicon: /icon/favicon.ico GitHub 自动发布 登录 GitHub，前往 settings -\u0026gt; Developer Settings -\u0026gt; Personal access tokens，创建 token(classic)\ntoken 选择永不过期，并且勾选 repo 和 workflow 选项\n为保证安全，将生成的 token，保存在 blog.source 仓库的变量中，前往 Settings -\u0026gt; Secrets and variables -\u0026gt; Actions （注意：token只能显示一次，需事先保存）\n创建 hugo 工作流文件， 进入 blog.source 仓库，前往 actions -\u0026gt; new workflow，找到 Pages 下的 Hugo，点击 configure 生成工作流文件\n修改配置文件 .github\\workflows\\hugo.yml\n# Sample workflow for building and deploying a Hugo site to GitHub Pages name: Deploy Hugo site to Pages on: # Runs on pushes targeting the default branch push: branches: [\u0026#34;main\u0026#34;] # Allows you to run this workflow manually from the Actions tab workflow_dispatch: # Default to bash defaults: run: shell: bash jobs: # Build job build: runs-on: ubuntu-latest env: # 你的 Hugo 版本 HUGO_VERSION: 0.128.0 steps: - name: Install Hugo CLI run: | wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \\ \u0026amp;\u0026amp; sudo dpkg -i ${{ runner.temp }}/hugo.deb - name: Install Dart Sass run: sudo snap install dart-sass - name: Checkout uses: actions/checkout@v4 with: submodules: recursive - name: Install Node.js dependencies run: \u0026#34;[[ -f package-lock.json || -f npm-shrinkwrap.json ]] \u0026amp;\u0026amp; npm ci || true\u0026#34; - name: Build with Hugo env: HUGO_CACHEDIR: ${{ runner.temp }}/hugo_cache HUGO_ENVIRONMENT: production run: | hugo \\ --minify \\ --baseURL \u0026#34;${{ steps.pages.outputs.base_url }}/\u0026#34; - name: Deploy to GitHub Pages uses: peaceiris/actions-gh-pages@v4 with: # Token personal_token: ${{ secrets.TOKEN }} # Github Pages 仓库 external_repository: xxx/xxx.github.io # 推送 main 分支 publish_branch: main publish_dir: ./public 接下来直接 push 本地的修改到远程 blog.source 仓库，Github Action 就会自动编译部署 GitHub Pages\n验证 创建文章 使用 Hugo 创建文章，生成的 Markdowen 文件的元数据中 image 可以指定文章封面，draft 表示文章是否属于草稿，草稿文件不会被发布，hidden 表示文章是否会被隐藏\nhugo new post/test/index.md 编写完成后可以使用以下命令预览\nhugo server -D blog.source 源仓库添加 .gitignore， 去除编译后文件\npublic/ resources/ assets/jsconfig.json .hugo_build.lock 推送到远程仓库\ngit commit -m \u0026#34;First commit\u0026#34; git push -u origin main 进入网站 xxx.github.io 验证\n","date":"2024-05-04T00:00:00Z","image":"https://picsum.photos/seed/41902ba42801a0271bec7f7324d1a05d/800/600.webp","permalink":"/document/toss/41902ba42801a0271bec7f7324d1a05d/","title":"使用 Hugo + Github Pages 搭建个人博客"}]